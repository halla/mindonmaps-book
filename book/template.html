<html>

◊(define (toc-item x)
   (let ([sub-pages (children x)])
     `(li        
       (a [[href ,(string-append "/" (symbol->string x)) ]] 
          ,(->html (select-from-doc 'h1 x)))
       ,(if sub-pages
           `(ul ,@(map toc-item sub-pages)
               )
           (span)))))

◊(define (toc)
   (let ([child-pages (children here)])
     (->html `(ul
              ,@(map toc-item child-pages)))))

◊(define prev-page (previous here))
◊(define next-page (next here))
◊(define (page-title page) (->html (select-from-doc 'h1 page)))


<head>
<meta charset="UTF-8">
<title>◊select['h1 doc] | Mind on Maps</title>

<link rel="stylesheet" type="text/css" media="all" href="styles/tufte.css" />
<link rel="stylesheet" type="text/css" media="all" href="styles/styles.css" />
</head>
<body>
<div id="main-content">◊->html[doc]



</div>

<div id="toc">
  ◊when/block[(children here)]{ ◊toc{} }
</div>

◊when/block[(not (equal? 'pagetree-root (parent here)))]{ 
<div id="footer">
  <div class="navigation">
    ◊when/block[prev-page]{ <a href="/◊|prev-page|">&larr; ◊(page-title prev-page)</a>}
    
    <a href="/◊(next 'pagetree-root)">Top</a>
  
    <a href="/◊(parent here)">Up</a>
  
    ◊when/block[next-page]{
    <a href="/◊|next-page|">◊(page-title next-page) &rarr; </a>}  
  </div>
</div>
}

</body>
</html>
